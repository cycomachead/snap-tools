<!DOCTYPE html>
<html>
    <head>
        <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
        <title>
            Snap! Build Your Own Blocks. Beta
        </title>
        <link rel="shortcut icon" href="http://snap.berkeley.edu/fav3.gif" type="image/gif">
        <script type="text/javascript" src="../morphic.js"></script>
      
        <script type="text/javascript" src="../widgets.js"></script>
        <script type="text/javascript" src="../blocks.js"></script>
        <script type="text/javascript" src="../threads.js"></script>
        <script type="text/javascript" src="../objects.js"></script>
        <script type="text/javascript" src="../gui.js"></script>
        <script type="text/javascript" src="../paint.js"></script>
        <script type="text/javascript" src="../lists.js"></script>
        <script type="text/javascript" src="../byob.js"></script>

        <script type="text/javascript" src="../xml.js"></script>
        <script type="text/javascript" src="../store.js"></script>
        <script type="text/javascript" src="../locale.js"></script>
        <script type="text/javascript" src="../cloud.js"></script>
        <script type="text/javascript" src="../sha512.js"></script>

        <script type="text/javascript">
			function getQueryParams(qs) {
				qs = qs.split("+").join(" ");

				var params = {}, tokens, re = /[?&]?([^=]+)=([^&]*)/g;

				while ( tokens = re.exec(qs)) {
					params[decodeURIComponent(tokens[1])] = decodeURIComponent(tokens[2]);
				}

				return params;
			}

            function gotXML(xml) {
                document.getElementById('thexml').value = xml;
                //window.open('data:text/xml,' + encodeURIComponent(xml));
            }
            
            function gotError(a,b) {
                document.getElementById('theerror').innerHTML = "GOT ERROR: " + a + "<br>" + b;
            }
        </script>

        <script type="text/javascript">
			var params = getQueryParams(document.location.search);
			var username = params.Username;
			var projname = params.ProjectName;


			SnapCloud.getPublicProject("Username="+username+"&ProjectName="+projname, gotXML, gotError)
        </script>
    </head>
    <body>
        <div id="theerror" style="background-color: red"></div>  
        <textarea id="thexml" rows="20" cols="100"></textarea>

    </body>
</html>
